<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>J P Morgan Tournament Of Champions 2024 - Spoiler-Free</title>
    <style>
        * { box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 16px;
            background: #0d0d0d;
            color: #fff;
        }
        h1 {
            color: #ff6b00;
            text-align: center;
            margin-bottom: 8px;
            font-size: 1.5em;
        }
        .subtitle {
            text-align: center;
            color: #666;
            font-size: 0.85em;
            margin-bottom: 24px;
        }
        h2 {
            color: #ff6b00;
            font-size: 1.2em;
            margin: 24px 0 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid #333;
        }
        .matches {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 16px;
        }
        .match {
            background: #1a1a1a;
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.2s;
        }
        .match:hover { transform: scale(1.02); }
        .match a {
            text-decoration: none;
            color: inherit;
        }
        .thumbnail {
            width: 100%;
            aspect-ratio: 16/9;
            object-fit: cover;
            display: block;
        }
        .info { padding: 12px; }
        .title {
            color: #fff;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 4px;
            line-height: 1.3;
        }
        .meta {
            color: #888;
            font-size: 0.75em;
        }
        .duration {
            background: rgba(0,0,0,0.8);
            color: #fff;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.75em;
            position: absolute;
            bottom: 8px;
            right: 8px;
        }
        .thumb-container { position: relative; }

        /* Spoiler prevention: blur effect */
        .round {
            transition: filter 0.5s ease-out, opacity 0.5s ease-out;
        }
        .round.blurred {
            filter: blur(12px);
            opacity: 0.6;
        }
        .round.blurred .match {
            pointer-events: none;
        }
        .round.revealed {
            filter: none;
            opacity: 1;
        }
        .round.revealed .match {
            pointer-events: auto;
        }
    </style>
</head>
<body>
    <h1>J P Morgan Tournament Of Champions 2024</h1>
    <p class="subtitle">Scroll down to reveal later rounds (spoiler-free viewing)</p>

    <div id="content"></div>

    <script>
        const matches = [
            { "id": "k4CTkVhdT9Z4kizS7me", "title": "Round 2 – Youssef Soliman v Victor Crouin", "round": "ROUND2", "date": "2024-01-19", "duration": "1:30" },
            { "id": "kRKAb7dEY9laCIzSeVe", "title": "Round 2 – Fares Dessouky v Miguel Rodriguez", "round": "ROUND2", "date": "2024-01-19", "duration": "1:15" },
            { "id": "k3Ujffc1KL4F3EzSidD", "title": "Round 2 – Mostafa Asal v Patrick Rooney", "round": "ROUND2", "date": "2024-01-19", "duration": "1:05" },
            { "id": "k20ONtni8qcluKzSmsI", "title": "Round 2 – Youssef Ibrahim v Nick Wall", "round": "ROUND2", "date": "2024-01-20", "duration": "1:04" },
            { "id": "k2U8p0lfTVC0x9zSgBW", "title": "Round 2 – Andrew Douglas v Diego Elias", "round": "ROUND2", "date": "2024-01-19", "duration": "0:54" },
            { "id": "k5GD6S8fnd4eiDzS710", "title": "Round 2 – Eain Yow Ng v Paul Coll", "round": "ROUND2", "date": "2024-01-19", "duration": "0:50" },
            { "id": "k4k3KN9P1sG74TzSjod", "title": "Round 2 – Cesar Salazar v Mohamed Elshorbagy", "round": "ROUND2", "date": "2024-01-20", "duration": "0:48" },
            { "id": "k4trhZpTqw85CRzS5Qi", "title": "Round 2 – Ali Farag v Omar Mosaad", "round": "ROUND2", "date": "2024-01-18", "duration": "0:43" },
            { "id": "k3XNGuK4hrTEqLzS2kJ", "title": "Round 2 – Faraz Khan v Tarek Momen", "round": "ROUND2", "date": "2024-01-18", "duration": "0:42" },
            { "id": "k1gOS5x8kj78tWzSyQS", "title": "Round 3 – Marwan Elshorbagy v Victor Crouin", "round": "ROUND3", "date": "2024-01-21", "duration": "1:25" },
            { "id": "k5t5wT5IjaGiZrzSpYQ", "title": "Round 3 – Iker Pajares v Tarek Momen", "round": "ROUND3", "date": "2024-01-20", "duration": "1:17" },
            { "id": "k2bOOMKbDYkBPDzSEjD", "title": "Round 3 – Youssef Ibrahim v Diego Elias", "round": "ROUND3", "date": "2024-01-21", "duration": "1:10" },
            { "id": "k5HyPhdYtmmyv8zSEMy", "title": "Round 3 – Mostafa Asal v Mohamed Abouelghar", "round": "ROUND3", "date": "2024-01-21", "duration": "0:58" },
            { "id": "k4dZ9geTccboQLzSCNO", "title": "Round 3 – Mazen Hesham v Fares Dessouky", "round": "ROUND3", "date": "2024-01-21", "duration": "0:58" },
            { "id": "k7MwyCoWPCrGCozSro7", "title": "Round 3 – Ali Farag v Baptiste Masotti", "round": "ROUND3", "date": "2024-01-20", "duration": "0:54" },
            { "id": "k23wmOVOzyXRcozSFbk", "title": "Round 3 – Nathan Lake v Mohamed Elshorbagy", "round": "ROUND3", "date": "2024-01-22", "duration": "0:50" },
            { "id": "k7yVoF3fJsRJt9zSsIR", "title": "Round 3 – Yahya Elnawasany v Paul Coll", "round": "ROUND3", "date": "2024-01-20", "duration": "0:48" },
            { "id": "k53ct9tqveoXMGzSVHb", "title": "Quarter Final – Victor Crouin v Paul Coll", "round": "QUARTER_FINAL", "date": "2024-01-23", "duration": "1:21" },
            { "id": "k1otjPifshxUJxzSVx2", "title": "Quarter Final – Ali Farag v Tarek Momen", "round": "QUARTER_FINAL", "date": "2024-01-23", "duration": "1:15" },
            { "id": "k1MQx6PQ6lS2FfzTnNP", "title": "Semi Final – Mostafa Asal v Diego Elias", "round": "SEMI_FINAL", "date": "2024-01-25", "duration": "1:44" },
            { "id": "k1X93jqxtK1kY2zTn4z", "title": "Semi Final – Ali Farag v Victor Crouin", "round": "SEMI_FINAL", "date": "2024-01-25", "duration": "1:07" },
            { "id": "k3KfHa4mNcXjyvzTA7N", "title": "Final – Ali Farag v Diego Elias", "round": "FINAL", "date": "2024-01-26", "duration": "1:44" }
        ];

        const ROUND_ORDER = ['ROUND1', 'ROUND2', 'ROUND3', 'QUARTER_FINAL', 'SEMI_FINAL', 'FINAL'];
        const ROUND_NAMES = {
            'ROUND1': 'Round 1',
            'ROUND2': 'Round 2',
            'ROUND3': 'Round 3',
            'QUARTER_FINAL': 'Quarter Finals',
            'SEMI_FINAL': 'Semi Finals',
            'FINAL': 'Final'
        };

        function groupByRound(matches) {
            const groups = {};
            matches.forEach(m => {
                if (!groups[m.round]) groups[m.round] = [];
                groups[m.round].push(m);
            });
            // Sort each group by duration descending
            Object.values(groups).forEach(arr =>
                arr.sort((a, b) => parseDuration(b.duration) - parseDuration(a.duration))
            );
            return groups;
        }

        function parseDuration(str) {
            const [h, m] = str.split(':').map(Number);
            return h * 60 + m;
        }

        function renderCard(match) {
            const url = 'https://www.dailymotion.com/video/' + match.id;
            const thumb = 'https://www.dailymotion.com/thumbnail/video/' + match.id;
            return `
                <div class="match">
                    <a href="${url}" target="_blank" rel="noopener">
                        <div class="thumb-container">
                            <img class="thumbnail" src="${thumb}" alt="${match.title}" loading="lazy">
                            <span class="duration">${match.duration}</span>
                        </div>
                        <div class="info">
                            <div class="title">${match.title}</div>
                            <div class="meta">${match.date}</div>
                        </div>
                    </a>
                </div>
            `;
        }

        function render() {
            const groups = groupByRound(matches);
            const content = document.getElementById('content');
            let firstRoundSeen = false;

            ROUND_ORDER.forEach(round => {
                const roundMatches = groups[round];
                if (!roundMatches || roundMatches.length === 0) return;

                const isBlurred = firstRoundSeen;
                firstRoundSeen = true;

                const section = document.createElement('section');
                section.className = 'round' + (isBlurred ? ' blurred' : '');
                section.dataset.round = round;
                section.innerHTML = `
                    <h2>${ROUND_NAMES[round] || round}</h2>
                    <div class="matches">
                        ${roundMatches.map(renderCard).join('')}
                    </div>
                `;
                content.appendChild(section);
            });

            // Setup IntersectionObserver for blur reveal
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting && entry.intersectionRatio > 0.3) {
                        entry.target.classList.remove('blurred');
                        entry.target.classList.add('revealed');
                    }
                });
            }, { threshold: [0.3], rootMargin: '0px 0px -10% 0px' });

            document.querySelectorAll('.round.blurred').forEach(s => observer.observe(s));
        }

        render();
    </script>
</body>
</html>
